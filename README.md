# üß† Local-Deep-Agents-from-Scratch

LocalDeepAgents_01

–°–æ–∑–¥–∞–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö Deep Agents –Ω–∞ –±–∞–∑–µ **LangGraph**, **LLMs**, **—Ñ–∞–π–ª–æ–≤–æ–π –ø–∞–º—è—Ç–∏**, **–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è** –∏ **—Å—É–±–∞–≥–µ–Ω—Ç–æ–≤**.

---

![DeepAgents\_02.png](Images/DeepAgents_02.png)

–ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã:

–£—á–µ–±–Ω—ã–π –∫—É—Ä—Å:
[https://academy.langchain.com/courses/deep-agents-with-langgraph](https://academy.langchain.com/courses/deep-agents-with-langgraph)
[https://github.com/langchain-ai/deep-agents-from-scratch](https://github.com/langchain-ai/deep-agents-from-scratch)

---

# üìå –û–≥–ª–∞–≤–ª–µ–Ω–∏–µ

1. [–í–≤–µ–¥–µ–Ω–∏–µ](#–≤–≤–µ–¥–µ–Ω–∏–µ)
2. [–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ Deep Agent](#–∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞-deep-agent)
3. [–ë–∞–∑–æ–≤—ã–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫: create_react_agent](#–±–∞–∑–æ–≤—ã–π-—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π-–±–ª–æ–∫-create_react_agent)
4. [–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ todo-–ª–∏—Å—Ç—ã](#–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ-—á–µ—Ä–µ–∑-todo-–ª–∏—Å—Ç—ã)
5. [–í–Ω–µ—à–Ω—è—è –ø–∞–º—è—Ç—å: —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞](#–≤–Ω–µ—à–Ω—è—è-–ø–∞–º—è—Ç—å-—Ñ–∞–π–ª–æ–≤–∞—è-—Å–∏—Å—Ç–µ–º–∞)
6. [–°—É–±–∞–≥–µ–Ω—Ç—ã –∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Å—É–±–∞–≥–µ–Ω—Ç—ã-–∏-–¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ)
7. [Think-tool: —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è](#think-tool-—É–ø—Ä–∞–≤–ª—è–µ–º–∞—è-—Ä–µ—Ñ–ª–µ–∫—Å–∏—è)
8. [–°–±–æ—Ä–∫–∞ Deep Research Agent](#—Å–±–æ—Ä–∫–∞-deep-research-agent)
9. [DeepAgents ‚Äî –≥–æ—Ç–æ–≤–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è](#deepagents--–≥–æ—Ç–æ–≤–∞—è-–∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è)
10. [–ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞](#–ø—Ä–∏–º–µ—Ä—ã-–∫–æ–¥–∞)
11. [–ó–∞–ø—É—Å–∫ –≤ UI (deep-agents-ui) –Ω–∞ Ubuntu](#–∑–∞–ø—É—Å–∫-–≤-ui-deep-agents-ui-–Ω–∞-ubuntu)
12. [–†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã fetchStateHistory](#—Ä–µ—à–µ–Ω–∏–µ-–ø—Ä–æ–±–ª–µ–º—ã-fetchstatehistory)
13. [–¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ](#—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
14. [–ó–∞–∫–ª—é—á–µ–Ω–∏–µ](#–∑–∞–∫–ª—é—á–µ–Ω–∏–µ)

---

# üß≠ –í–≤–µ–¥–µ–Ω–∏–µ

Deep Agents ‚Äî —ç—Ç–æ –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω—ã–π –ø–æ–¥—Ö–æ–¥ –∫ —Å–æ–∑–¥–∞–Ω–∏—é –∞–≤—Ç–æ–Ω–æ–º–Ω—ã—Ö –∞–≥–µ–Ω—Ç–æ–≤, —É—Å—Ç–æ–π—á–∏–≤—ã—Ö –∫ –¥–ª–∏–Ω–Ω—ã–º –∑–∞–¥–∞—á–∞–º (20‚Äì100+ —à–∞–≥–æ–≤).
–û—Å–Ω–æ–≤–∞–Ω –Ω–∞ –ø—Ä–∞–∫—Ç–∏–∫–∞—Ö —Å–∏—Å—Ç–µ–º:

* **Manus**
* **Claude Code**
* **OpenAI Deep Research**
* **Anthropic Multi-Agent Researcher**

–ö–ª—é—á–µ–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã:

* –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ (todos)
* –ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–æ–µ offloading (files)
* –°—É–±–∞–≥–µ–Ω—Ç—ã
* –°–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã
* –ú–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ LangGraph

![DeepAgents\_01.png](Images/DeepAgents_01.png)

---
# üß† –û–±–∑–æ—Ä –∏—Å—Ö–æ–¥–Ω–æ–≥–æ –∫–æ–¥–∞ –º–æ–¥—É–ª–µ–π Deep Agents (from scratch)

Deep Agent —Å–æ—Å—Ç–æ–∏—Ç –∏–∑ —á–µ—Ç—ã—Ä—ë—Ö –æ—Å–Ω–æ–≤–Ω—ã—Ö –º–æ–¥—É–ª–µ–π:

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Supervisor        ‚îÇ
‚îÇ     (–≥–ª–∞–≤–Ω—ã–π –∞–≥–µ–Ω—Ç)      ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ Delegation
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ        Subagent          ‚îÇ
‚îÇ  (–∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å, –∫–æ–¥–µ—Ä)  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
           ‚îÇ Tools
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  File System  |  Todos   ‚îÇ
‚îÇ (–≤–Ω–µ—à–Ω—è—è –ø–∞–º—è—Ç—å –∞–≥–µ–Ω—Ç–∞   ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

# ‚öôÔ∏è –ë–∞–∑–æ–≤—ã–π —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω—ã–π –±–ª–æ–∫: `create_react_agent`

LangGraph –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –ø—Ä–µ–¥–Ω–∞—Å—Ç—Ä–æ–µ–Ω–Ω—ã–π –∞–≥–µ–Ω—Ç ReAct:

```python
from langgraph.prebuilt import create_react_agent

agent = create_react_agent(
    model=my_llm,
    tools=[...],
    prompt="You are a helpful assistant."
)
```

–§—É–Ω–∫—Ü–∏–∏:

* —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ–º,
* –≤—ã–∑–æ–≤—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤,
* —É—Å–ª–æ–≤–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã,
* –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è –≥—Ä–∞—Ñ–∞,
* –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Command.

![graph\_01.PNG](Images/graph_01.PNG)

---

# üìù –ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ todo-–ª–∏—Å—Ç—ã

–ü—Ä–∏–º–µ—Ä todo-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞:

```python
@tool
def write_todos(todos: list[Todo], state: InjectedState, tool_call_id):
    return Command(update={
        "todos": todos,
        "messages": [ToolMessage("Todos updated", tool_call_id)]
    })
```

Todo-–ª–∏—Å—Ç —Å–ª—É–∂–∏—Ç:

* –ø–ª–∞–Ω–æ–º –¥–µ–π—Å—Ç–≤–∏—è,
* —Ç—Ä–µ–∫–µ—Ä–æ–º –ø—Ä–æ–≥—Ä–µ—Å—Å–∞,
* –Ω–∞–±—Ä–æ—Å–∫–æ–º —Ç—Ä–∞–µ–∫—Ç–æ—Ä–∏–∏ –∞–≥–µ–Ω—Ç–∞.

---

# üíæ –í–Ω–µ—à–Ω—è—è –ø–∞–º—è—Ç—å: —Ñ–∞–π–ª–æ–≤–∞—è —Å–∏—Å—Ç–µ–º–∞

Deep Agent —Ö—Ä–∞–Ω–∏—Ç –¥–∞–Ω–Ω—ã–µ –Ω–µ –≤ –∫–æ–Ω—Ç–µ–∫—Å—Ç–µ LLM, –∞ –≤ state.files:

```python
files = {
  "page_1.md": "... markdown ...",
  "user_request.txt": "Find info about MCP"
}
```

–ü—Ä–∏–º–µ—Ä—ã –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–≤:

```python
@tool
def write_file(path: str, content: str, state: InjectedState, tool_call_id):
    return Command(update={"files": {path: content}})
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

* raw tool calls,
* —á–µ—Ä–Ω–æ–≤–∏–∫–æ–≤,
* –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö,
* –±–æ–ª—å—à–∏—Ö —Ç–µ–∫—Å—Ç–æ–≤.

---

# ü§ñ –°—É–±–∞–≥–µ–Ω—Ç—ã –∏ –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

–°—É–±–∞–≥–µ–Ω—Ç—ã ‚Äî —ç—Ç–æ –Ω–µ–∑–∞–≤–∏—Å–∏–º—ã–µ –∞–≥–µ–Ω—Ç—ã —Å–æ —Å–≤–æ–∏–º–∏ –ø—Ä–æ–º–ø—Ç–∞–º–∏.

–ü—Ä–∏–º–µ—Ä –æ–ø–∏—Å–∞–Ω–∏—è —Å—É–±–∞–≥–µ–Ω—Ç–∞:

```python
research_subagent = {
  "name": "research-agent",
  "description": "Performs deep research tasks.",
  "prompt": "...",
  "tools": ["tavily_search", "read_file"]
}
```

–ì–ª–∞–≤–Ω—ã–π –∞–≥–µ–Ω—Ç –≤—ã–∑—ã–≤–∞–µ—Ç –∏—Ö —á–µ—Ä–µ–∑ `task_tool`.

---

# üß† Think-tool: —É–ø—Ä–∞–≤–ª—è–µ–º–∞—è —Ä–µ—Ñ–ª–µ–∫—Å–∏—è

–≠—Ç–æ no-op –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç:

```python
@tool
def think_tool(thought: str):
    return f"[THOUGHT]: {thought}"
```

–ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è:

* –∞–Ω–∞–ª–∏–∑–∞ –ø—Ä–æ–≥—Ä–µ—Å—Å–∞,
* –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è –æ—à–∏–±–æ–∫,
* –∞—É–¥–∏—Ç–∞ reasoning.

---

# üèó –°–±–æ—Ä–∫–∞ Deep Research Agent

–°–∏—Å—Ç–µ–º–∞ –æ–±—ä–µ–¥–∏–Ω—è–µ—Ç:

* todos,
* files,
* subagents,
* think-tool,
* Tavily search,
* summary –º–æ–¥–µ–ª–∏.

Flow:

1. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –∑–∞–ø—Ä–æ—Å ‚Üí —Ñ–∞–π–ª
2. –°–æ—Å—Ç–∞–≤–∏—Ç—å todo-–ª–∏—Å—Ç
3. –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–∞–±–æ—Ç—É research-agent
4. –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ (markdown)
5. –û–±–Ω–æ–≤–∏—Ç—å todo
6. –í–µ—Ä–Ω—É—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—ã–π –æ—Ç—á—ë—Ç

---

# üì¶ DeepAgents ‚Äî –≥–æ—Ç–æ–≤–∞—è –∞–±—Å—Ç—Ä–∞–∫—Ü–∏—è

–ë–∏–±–ª–∏–æ—Ç–µ–∫–∞ DeepAgents —É–∂–µ —Å–æ–¥–µ—Ä–∂–∏—Ç:

* todo-–∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç—ã,
* —Ñ–∞–π–ª–æ–≤—É—é —Å–∏—Å—Ç–µ–º—É,
* task_tool,
* think-tool,
* supervisor + subagent –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—É.

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π –¥–æ—Å—Ç—É–ø–µ–Ω –≤ —Ä–∞–∑–¥–µ–ª–µ Resources.

---

# üß™ –ü—Ä–∏–º–µ—Ä—ã –∫–æ–¥–∞

–ü—Ä–∏–º–µ—Ä –≤—ã–∑–æ–≤–∞ –∞–≥–µ–Ω—Ç–∞:

```python
result = agent.invoke({"messages": [
  {"role": "user", "content": "Give me an overview of MCP"}
]})
```

–ü—Ä–∏–º–µ—Ä —á—Ç–µ–Ω–∏—è —Ñ–∞–π–ª–æ–≤:

```python
agent_state["files"]["page_1.md"]
```

---


![ComponentDiagram\_01.png](Images/ComponentDiagram_01.png)

![SequenceDiagram\_01.png](Images/SequenceDiagram_01.png)

---

# üñ• –ó–∞–ø—É—Å–∫ –≤ UI (deep-agents-ui) –Ω–∞ Ubuntu

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å **–≤ –≤–∏–∑—É–∞–ª—å–Ω–æ–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ** `deep-agents-ui`, –∫–æ—Ç–æ—Ä—ã–π –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç:

* —á–∞—Ç —Å –∞–≥–µ–Ω—Ç–æ–º,
* TODO-—Å–ø–∏—Å–æ–∫,
* ‚Äú—Ñ–∞–π–ª–æ–≤—É—é –ø–∞–º—è—Ç—å‚Äù (state.files),
* tool calls –∏ –ø—Ä–µ—Ä—ã–≤–∞–Ω–∏—è (interrupt/resume).
* 
![ui_config_01.png](Images/ui_config_01.png)

![ui_example_01.png](Images/ui_example_01.png)


## –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è

### 1) Python –æ–∫—Ä—É–∂–µ–Ω–∏–µ

–ü—Ä–µ–¥–ø–æ–ª–∞–≥–∞–µ—Ç—Å—è, —á—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ —É–∂–µ —Å–æ–∑–¥–∞–Ω–æ –∏ –∞–∫—Ç–∏–≤–∏—Ä—É–µ—Ç—Å—è —Ç–∞–∫:

```bash
cd /home/konstantin/Proj/Local-Deep-Agents-from-Scratch
source .venv/bin/activate
```

### 2) Node.js + Yarn (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–Ω—ã–π —Å–ø–æ—Å–æ–± —á–µ—Ä–µ–∑ nvm)

–ï—Å–ª–∏ UI —Å—Ç–∞–≤–∏—Ç—Å—è –Ω–∞ ‚Äú—á–∏—Å—Ç—É—é‚Äù Ubuntu, —É–¥–æ–±–Ω–µ–µ –≤—Å–µ–≥–æ –ø–æ—Å—Ç–∞–≤–∏—Ç—å Node —á–µ—Ä–µ–∑ `nvm`, –∞ Yarn —á–µ—Ä–µ–∑ `corepack`:

```bash
sudo apt update
sudo apt install -y curl git

# nvm
curl -o- https://raw.githubusercontent.com/nvm-sh/nvm/v0.39.7/install.sh | bash
source ~/.bashrc

# Node LTS
nvm install --lts
node -v
npm -v

# Yarn
corepack enable
yarn -v
```

## –£—Å—Ç–∞–Ω–æ–≤–∫–∞ UI (–æ–¥–∏–Ω —Ä–∞–∑)

–ú–æ–∂–Ω–æ –¥–µ—Ä–∂–∞—Ç—å UI –∫–∞–∫ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Ä—è–¥–æ–º, –∏–ª–∏ (–∫–∞–∫ –≤ –ø—Ä–∏–º–µ—Ä–µ) ‚Äî –≤–Ω—É—Ç—Ä–∏ –ø—Ä–æ–µ–∫—Ç–∞:

```bash
cd /home/konstantin/Proj/Local-Deep-Agents-from-Scratch
git clone https://github.com/langchain-ai/deep-agents-ui.git
cd deep-agents-ui
yarn install
```

## –ó–∞–ø—É—Å–∫ (–±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–≤–∞ —Ç–µ—Ä–º–∏–Ω–∞–ª–∞)

### –¢–µ—Ä–º–∏–Ω–∞–ª ‚Ññ1 ‚Äî LangGraph dev server (–∞–≥–µ–Ω—Ç)

–£—Å–ø–µ—à–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

```bash
cd /home/konstantin/Proj/Local-Deep-Agents-from-Scratch
source .venv/bin/activate
cd Python
langgraph dev
```

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–µ—Ä–≤–µ—Ä –¥–æ—Å—Ç—É–ø–µ–Ω –ø–æ –∞–¥—Ä–µ—Å—É:

* API: `http://127.0.0.1:2024`
* API Docs: `http://127.0.0.1:2024/docs`

–ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ —Å–µ—Ä–≤–µ—Ä ‚Äú–∂–∏–≤‚Äù:

```bash
curl -I http://127.0.0.1:2024/docs
curl -s http://127.0.0.1:2024/ok; echo
```

–û–∂–∏–¥–∞–µ–º–æ: `/docs` ‚Üí 200 OK, `/ok` ‚Üí `{"ok":true}`.

> –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ: –∏–Ω–æ–≥–¥–∞ CLI –º–æ–∂–µ—Ç –≤—ã–≤–µ—Å—Ç–∏ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ –≤ –ø–æ—Ç–æ–∫–µ `_open_browser` (–∞–≤—Ç–æ-–æ—Ç–∫—Ä—ã—Ç–∏–µ –±—Ä–∞—É–∑–µ—Ä–∞). –ï—Å–ª–∏ `/docs` –∏ `/ok` –æ—Ç–≤–µ—á–∞—é—Ç ‚Äî —Å–µ—Ä–≤–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç, —ç—Ç–æ –Ω–µ –∫—Ä–∏—Ç–∏—á–Ω–æ.

### –¢–µ—Ä–º–∏–Ω–∞–ª ‚Ññ2 ‚Äî deep-agents-ui

–£—Å–ø–µ—à–Ω—ã–π –ø—Ä–∏–º–µ—Ä:

```bash
cd /home/konstantin/Proj/Local-Deep-Agents-from-Scratch/deep-agents-ui
yarn dev
```

UI –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –Ω–∞:

* `http://localhost:3000`

## –ù–∞—Å—Ç—Ä–æ–π–∫–∏ UI

–í –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–µ –æ—Ç–∫—Ä–æ–π **Settings** –∏ —É–∫–∞–∂–∏:

* **Deployment URL**: `http://127.0.0.1:2024`
* **Assistant ID**: `agent`

–ì–¥–µ –≤–∑—è—Ç—å `Assistant ID`:

* —ç—Ç–æ –∫–ª—é—á –≥—Ä–∞—Ñ–∞ –∏–∑ `langgraph.json` –≤ —Å–µ–∫—Ü–∏–∏ `"graphs"` (–≤ –ª–æ–≥–∞—Ö `langgraph dev` —Ç–∞–∫–∂–µ –≤–∏–¥–Ω–æ: `Importing graph with id agent`).

---

# üõ† –†–µ—à–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã fetchStateHistory

## –°–∏–º–ø—Ç–æ–º—ã

UI –º–æ–∂–µ—Ç —É–ø–∞—Å—Ç—å —Å –æ—à–∏–±–∫–æ–π:

* `fetchStateHistory must be set to true to use history`

–≠—Ç–æ –æ–∑–Ω–∞—á–∞–µ—Ç: UI –æ–±—Ä–∞—â–∞–µ—Ç—Å—è –∫ `history` –≤ SDK, –Ω–æ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ stream –Ω–µ –≤–∫–ª—é—á–µ–Ω–∞ –∑–∞–≥—Ä—É–∑–∫–∞ –∏—Å—Ç–æ—Ä–∏–∏.

## –†–µ—à–µ–Ω–∏–µ

–ù—É–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä `fetchStateHistory: true` –≤ –≤—ã–∑–æ–≤ `useStream(...)`.

–§–∞–π–ª (–≤ `deep-agents-ui`):

```
src/app/hooks/useChat.ts
```

–ò—â–µ–º –±–ª–æ–∫:

```ts
const stream = useStream<StateType>({
  ...
});
```

–î–æ–±–∞–≤–ª—è–µ–º:

```ts
fetchStateHistory: true,
```

–ü—Ä–∏–º–µ—Ä:

```ts
const stream = useStream<StateType>({
  apiUrl: deploymentUrl,
  assistantId: activeAssistant?.assistant_id,
  threadId: activeThreadId,

  fetchStateHistory: true,

  // –æ—Å—Ç–∞–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏...
});
```

–ü–æ—Å–ª–µ –ø—Ä–∞–≤–∫–∏ **–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏ UI**:

```bash
# –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å Ctrl+C
yarn dev
```

–ü—Ä–æ–≤–µ—Ä–∫–∞, —á—Ç–æ –ø—Ä–∞–≤–∫–∞ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞:

```bash
rg -n "fetchStateHistory" src/app/hooks/useChat.ts
```

---

## –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ç–∏–ø–æ–≤—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

### –ü–æ—Ä—Ç 2024 –∑–∞–Ω—è—Ç (`Address already in use`)

–ù–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å—Å:

```bash
sudo lsof -i :2024
```

–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ü–µ—Å—Å:

```bash
sudo kill -9 <PID>
```

–ò —Å–Ω–æ–≤–∞:

```bash
langgraph dev
```

---

# ‚úÖ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
[OutPut_01.txt](OutPut_01.txt)

![debug\_01.png](Images/debug_01.png)

![studio\_01.png](Images/studio_01.png)

---

# üèÅ –ó–∞–∫–ª—é—á–µ–Ω–∏–µ

Deep Agents ‚Äî —ç—Ç–æ:

* –º–æ–¥—É–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞,
* —É–ø—Ä–∞–≤–ª—è–µ–º–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ,
* –¥–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –∑–∞–¥–∞—á,
* –≤–Ω–µ—à–Ω—è—è –ø–∞–º—è—Ç—å,
* –º–æ—â–Ω—ã–µ –ø—Ä–æ–º–ø—Ç—ã.

–ò—Å–ø–æ–ª—å–∑—É—è —ç—Ç–∏ –ø—Ä–∏–Ω—Ü–∏–ø—ã, –≤—ã –º–æ–∂–µ—Ç–µ —Å–æ–∑–¥–∞–≤–∞—Ç—å:

* –∞–Ω–∞–ª–∏—Ç–∏—á–µ—Å–∫–∏–µ –∞–≥–µ–Ω—Ç—ã,
* –∏—Å—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å—Å–∫–∏–µ —Å–∏—Å—Ç–µ–º—ã,
* –∫–æ–¥–æ–≤—ã–µ –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç—ã,
* –±–∏–∑–Ω–µ—Å-–∞–≥–µ–Ω—Ç–æ–≤,
* —Å–ª–æ–∂–Ω—ã–µ workflow-–ø–∞–π–ø–ª–∞–π–Ω—ã.



